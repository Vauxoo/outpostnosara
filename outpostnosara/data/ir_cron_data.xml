<odoo noupdate="1">

    <record id="ir_cron_assign_lead" model="ir.cron">
        <field name="name">Assign Leads and Email Invites</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="state">code</field>
        <field name="code">
partner = env["ir.config_parameter"].sudo().get_param("outpostnosara.default_assigned_user")

start_date = "21/10/2022 00:00:00"
start_date = datetime.datetime.strptime(start_date, "%d/%m/%Y %H:%M:%S")

records = env["crm.lead"].search([
  ("create_date", ">", start_date)
  ])
  
for record in records:
  if partner in record.message_partner_ids.ids:
    continue
  inv_wizard = env["mail.wizard.invite"].with_context({
    "default_res_model": "crm.lead",
    "default_res_id": record.id
  }).with_user(env.user).create({
    "partner_ids" : [(4, int(partner))],
    "send_mail" : True
  })
  inv_wizard.add_followers()
        </field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
    </record>

</odoo>
