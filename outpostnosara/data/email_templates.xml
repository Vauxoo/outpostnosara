<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="pms.confirmed_reservation_email" model="mail.template">
        <field name="subject">Outpost Nosara has confirmed your reservation</field>
        <field name="email_to">${('%s,%s' % (object.pms_property_id.partner_id.email, (object.email and object.email or object.partner_id.email_formatted or ''))) | safe}</field>
        <field name="body_html" type="html">
            <table
                border="0"
                cellpadding="0"
                cellspacing="0"
                style="padding-top: 16px; background-color: #F1F1F1; font-family:Verdana, Arial,sans-serif; color: #454748; width: 100%; border-collapse:separate;"
            >
            <tr><td align="center">
                <table
                            border="0"
                            cellpadding="0"
                            cellspacing="0"
                            width="590"
                            style="background-color: #FCFCFA; color: #454748; border-collapse:separate; margin-bottom:16px;"
                        >
                    <head>
                        <link
                                    rel="stylesheet"
                                    href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
                                    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
                                    crossorigin="anonymous"
                                />
                    </head>
                    <tbody>
                        <!-- HEADER -->
                        <tr>
                            <td style="padding-right:20px; background-color: #E3DCD6;">
                                <table width="100%" cellpadding="7">
                                    <tr>
                                        <td align="center">
                                            <img src="/outpostnosara/static/img/logo.png" style="pngborder-style:none;max-width:45%; margin:16px;"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <!-- PROPERTY DESCRIPTION -->
                        <tr>
                            <td align="center" style="min-width: 590px; padding: 16px">
                                <table
                                            width="590"
                                            border="0"
                                            cellpadding="0"
                                            cellspacing="0"
                                            style="min-width: 590px; background-color: #FCFCFA; padding: 0px 0px 0px 0px; border-collapse:separate;"
                                        >
                                    <tr>
                                        <td align="right">
                                            <div class="col-sm-6" style="margin-top: 16px;">
                                                <p>
                                                    % if object.pms_property_id.partner_id.street
                                                    <span>${object.pms_property_id.partner_id.street}</span>
                                                    % endif
                                                    % if object.pms_property_id.partner_id.street2
                                                        <span>${object.pms_property_id.partner_id.street2}</span>
                                                    % endif
                                                </p>
                                                <p>
                                                    <span>${object.pms_property_id.partner_id.city}, </span>
                                                    <span>${object.pms_property_id.partner_id.country_id.name} </span>
                                                    <span>${object.pms_property_id.partner_id.zip} </span>
                                                </p>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td valign="top" style="font-size: 14px;">
                                            <hr
                                                            width="100%"
                                                            style="background-color:rgb(204,204,204);border:medium none;clear:both;display:block;font-size:0px;min-height:1px;line-height:0; margin: 16px 0px 16px 0px;"
                                                        />
                                            <div style="margin-top: 32px;">
                                                <p style="margin-bottom: 8px">
                                                    <span>Hi</span>
                                                    % if object.partner_id.is_harmony:
                                                        % if ctx.get('guest_name'):
                                                            ${ctx.get('guest_name').split(' ')[0]}
                                                        % else:
                                                            % if object.partner_id.name:
                                                                ${object.partner_id.name.split(' ')[0]}
                                                            % else:
                                                                % if object.partner_name:
                                                                    ${object.partner_name.split(' ')[0]}
                                                                % endif
                                                            % endif
                                                        % endif
                                                    % else:
                                                        % if object.partner_id.name:
                                                            ${object.partner_id.name.split(' ')[0]}
                                                        % else:
                                                            % if object.partner_name:
                                                                ${object.partner_name.split(' ')[0]}
                                                            % endif
                                                        % endif
                                                    % endif
                                                    <span style="margin-left: -3px;">,</span>
                                                </p>
                                                <p>
                                                    Your reservation has been confirmed. Please see the details below.
                                                </p>
                                                <p>
                                                    If you have any questions prior to your reservation date, please email us
                                                    at <a href="mailto:reservations@outpostnosara.com">reservations@outpostnosara.com</a>.
                                                </p>
                                                <br/>
                                                <p style="margin-bottom: 8px">Thank you,</p>
                                                <p>Outpost Management</p>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <!-- DETAILS -->
                        <tr>
                            <td align="center" style="min-width: 590px; padding: 16px">
                                <hr width="100%"
                                    style="background-color:rgb(204,204,204);border:medium none;clear:both;display:block;font-size:0px;min-height:1px;line-height:0; margin: 16px 0px 16px 0px;"
                                />
                                <div align="left" style="margin: 16px 0px 16px 0px;">
                                    <strong>Reservation Details</strong>
                                </div>
                                <table
                                            width="590"
                                            border="0"
                                            cellpadding="0"
                                            cellspacing="0"
                                            style="min-width: 590px; background-color: #FCFCFA; padding: 0px 8px 0px 8px; border-collapse:separate;"
                                        >
                                    <tr>
                                        <td valign="top" style="font-size: 14px;">
                                            <table style="width:60%;">
                                                <tr>
                                                    <td style="margin: 16px 0px 16px 0px; font-size: 14px;">
                                                        <div>
                                                            <strong>From:</strong> ${format_date(object.checkin, 'EEEE, MMMM d, Y')}
                                                            <strong> At</strong>
                                                            % if object.arrival_hour_formatted:
                                                                ${object.arrival_hour_formatted}
                                                            % else:
                                                                ${object.arrival_hour}
                                                            % endif
                                                        </div>
                                                        <div>
                                                            <strong>To:</strong> ${format_date(object.checkout, 'EEEE, MMMM d, Y')}
                                                            <strong> At</strong>
                                                            % if object.departure_hour_formatted:
                                                                ${object.departure_hour_formatted}
                                                            % else:
                                                                ${object.departure_hour}
                                                            % endif
                                                        </div>
                                                        <div style="font-size:12px;color:#9e9e9e">
                                                            <i><strong>TZ</strong> ${object.pms_property_id.tz}</i>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="margin: 16px 0px 16px 0px; font-size: 14px;">
                                                        % if object.preferred_room_id:
                                                        <div style="margin-top: 16px;">
                                                            <strong>Office:</strong>
                                                            ${object.preferred_room_id.name}
                                                        </div>
                                                        % endif
                                                    </td>
                                                </tr>
                                                % if object.folio_id.subscription_id.pin or (object.partner_id.is_harmony and object.partner_id.pin)
                                                <tr>
                                                    <td style="vertical-align:top;">
                                                        <div style="margin-top: 16px;">
                                                            <strong>Access Code for the Locks:  </strong>
                                                            % if object.partner_id.is_harmony:
                                                                ${object.partner_id.pin}
                                                            % else:
                                                                ${object.folio_id.subscription_id.pin}
                                                            % endif
                                                        </div>
                                                    </td>
                                                </tr>
                                                % endif
                                                % if object.pms_property_id.wifi_name and object.pms_property_id.wifi_password
                                                <tr>
                                                    <td style="margin: 16px 0px 16px 0px; font-size: 14px;">
                                                        <div style="margin-top: 16px;">
                                                            <strong>Network:</strong> ${object.pms_property_id.wifi_name}
                                                        </div>
                                                        <div>
                                                            <strong>Password:</strong> ${object.pms_property_id.wifi_password}
                                                        </div>
                                                    </td>
                                                </tr>
                                                % endif
                                                <tr>
                                                    <td style="margin: 16px 0px 16px 0px; font-size: 14px;">
                                                        <div style="margin-top: 16px;"><strong>Price: </strong> ${object.currency_id.symbol} ${object.price_room_services_set}</div>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    % if object.pms_property_id.mail_information
                                    <tr>
                                        <td valign="top" style="font-size: 14px;">
                                            <div>
                                                <hr width="100%"
                                                    style="background-color:rgb(204,204,204);border:medium none;clear:both;display:block;font-size:0px;min-height:1px;line-height:0; margin: 16px 0px 16px 0px;"
                                                />
                                                <div align="left" style="margin: 16px 0px 16px 0px;">
                                                    <strong>Additional Information</strong>
                                                </div>
                                                    ${object.pms_property_id.mail_information|safe}
                                            </div>
                                        </td>
                                    </tr>
                                    % endif
                                </table>
                            </td>
                        </tr>
                        <!-- FOOTER -->
                        <tr>
                            <td align="center" style="min-width: 590px;">
                                % if object.pms_property_id.privacy_policy
                                <table
                                        border="0"
                                        cellpadding="0"
                                        cellspacing="0"
                                        width="590"
                                        style="padding: 16px; background-color: #FCFCFA; color: #454748; border-collapse:separate;"
                                    >
                                    <tr><td style="font-size: 10px;">
                                        ${object.pms_property_id.privacy_policy|safe}
                                    </td></tr>
                                </table>
                                % endif
                            </td>
                        </tr>
                        <tr>
                            <td align="center" style="min-width: 590px;">
                                % if object.company_id
                                <table
                                        width="590"
                                        border="0"
                                        cellpadding="0"
                                        cellspacing="0"
                                        style="min-width: 590px; background-color: #FCFCFA; color: #454748; padding: 8px; border-collapse:separate;"
                                    >
                                    <tr>
                                        <td style="text-align: center; font-size: 10px;">
                                            Sent by <a
                                                        target="_blank"
                                                        href="${object.company_id.website}"
                                                        style="color: #875A7B;"
                                                    >OUTPOST NOSARA</a>
                                            <br/>
                                        </td>
                                    </tr>
                                </table>
                                % endif
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td></tr>
            </table>
        </field>
    </record>
</odoo>
